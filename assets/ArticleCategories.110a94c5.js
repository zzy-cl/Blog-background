import{g as G,a as H,u as J,d as K}from"./articlemanagement.13e00ad3.js";import{_ as P,r as N,a as i,b as u,o as C,j as S,d as e,w as a,F as Q,y as R,v as W,g as h,e as m,E as b,c as X,z as Y,h as Z}from"./index.6ec908bf.js";const ee=[{prop:"id",label:"ID",width:"200px"},{prop:"name",label:"\u540D\u79F0",width:"200px"},{prop:"alias",label:"\u522B\u540D",width:""},{prop:"actions",label:"\u64CD\u4F5C",width:"180px"}];const ae=m("\u67E5\u8BE2"),le=m("\u6DFB\u52A0\u5206\u7C7B"),te=m("\u4FEE\u6539"),oe=m("\u5220\u9664"),ne={class:"pagination"},se={class:"dialog-footer"},ue=m("\u5173\u95ED"),de=m("\u63D0\u4EA4"),re={class:"dialog-footer"},ie=m("\u5173\u95ED"),me=m("\u63D0\u4EA4"),pe={__name:"ArticleCategories",setup(ce){const n=N({id:"",name:"",alias:"",pageNum:1,pageSize:10}),I=o=>{n.pageNum=1,n.pageSize=o,p()},A=o=>{n.pageNum=o,p()},y=i(),w=i(null),p=async()=>{G(n).then(o=>{w.value=o.data.data[0][0]["COUNT(*)"],y.value=o.data.data[1]})};p();const s=i("success"),g=i({name:"",alias:""}),x=N({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",trigger:"blur"},{min:1,max:5,message:"1 \u5230 5 \u4F4D",trigger:"blur"}],alias:[{required:!0,message:"\u8BF7\u8F93\u5165\u5206\u7C7B\u522B\u540D",trigger:"blur"},{min:1,max:20,message:"1 \u5230 20 \u4F4D",trigger:"blur"}]}),f=i(!1),F=()=>{f.value=!0},D=()=>{s.value="success",H(g.value).then(o=>{p(),o.data.code===1&&(s.value="error"),b({type:s.value,message:o.data.message,center:!0})}),f.value=!1},k=i({id:0}),E=o=>{Z.confirm("\u4F60\u786E\u5B9A\u8981\u5220\u9664\u6B64\u5206\u7C7B\u5417?","\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u518D\u60F3\u60F3",type:"warning",center:!0}).then(()=>{s.value="success",k.value.id=Number(o.row.id),K(k.value).then(l=>{p(),l.data.code===1&&(s.value="error"),b({type:s.value,message:l.data.message,center:!0})})}).catch(()=>{b({type:"info",message:"\u53D6\u6D88\u5220\u9664",center:!0})})},c=i({name:"",alias:""}),v=i(!1),T=o=>{v.value=!0,c.value=o.row},$=()=>{s.value="success",J(c.value).then(o=>{console.log(o),p(),o.data.code===1&&(s.value="error"),b({type:s.value,message:o.data.message,center:!0})}),v.value=!1};return(o,l)=>{const _=u("el-input"),d=u("el-form-item"),r=u("el-button"),V=u("el-form"),z=u("el-card"),q=u("el-table-column"),L=u("el-table"),M=u("el-pagination"),U=u("el-dialog");return C(),S("div",null,[e(z,{class:"header-card",shadow:"hover"},{default:a(()=>[e(V,{inline:!0,model:n,class:"demo-form-inline"},{default:a(()=>[e(d,{label:"\u5206\u7C7BID"},{default:a(()=>[e(_,{modelValue:n.id,"onUpdate:modelValue":l[0]||(l[0]=t=>n.id=t),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7BID"},null,8,["modelValue"])]),_:1}),e(d,{label:"\u5206\u7C7B\u540D\u79F0"},{default:a(()=>[e(_,{modelValue:n.name,"onUpdate:modelValue":l[1]||(l[1]=t=>n.name=t),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(d,{label:"\u5206\u7C7B\u522B\u540D"},{default:a(()=>[e(_,{modelValue:n.alias,"onUpdate:modelValue":l[2]||(l[2]=t=>n.alias=t),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u522B\u540D"},null,8,["modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(r,{type:"primary",onClick:p},{default:a(()=>[ae]),_:1}),e(r,{type:"primary",onClick:F},{default:a(()=>[le]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(z,{class:"main-card",shadow:"hover"},{default:a(()=>[e(L,{data:y.value,stripe:"",style:{width:"100%"}},{default:a(()=>[(C(!0),S(Q,null,R(W(ee),(t,j)=>(C(),X(q,{prop:t.prop,label:t.label,width:t.width,key:j},Y({_:2},[t.prop==="actions"?{name:"default",fn:a(B=>[e(r,{onClick:O=>T(B),class:"button",type:"warning",size:"small",text:"",bg:""},{default:a(()=>[te]),_:2},1032,["onClick"]),e(r,{onClick:O=>E(B),class:"button",type:"danger",size:"small",text:"",bg:""},{default:a(()=>[oe]),_:2},1032,["onClick"])])}:void 0]),1032,["prop","label","width"]))),128))]),_:1},8,["data"]),h("div",ne,[e(M,{background:"",layout:"prev, pager, next",onSizeChange:I,onCurrentChange:A,"current-page":n.pageNum,"page-size":n.pageSize,total:w.value},null,8,["current-page","page-size","total"])])]),_:1}),e(U,{modelValue:f.value,"onUpdate:modelValue":l[6]||(l[6]=t=>f.value=t),title:"\u6DFB\u52A0\u6587\u7AE0\u5206\u7C7B",width:"30%",center:""},{footer:a(()=>[h("span",se,[e(r,{onClick:l[5]||(l[5]=t=>f.value=!1)},{default:a(()=>[ue]),_:1}),e(r,{type:"primary",onClick:D},{default:a(()=>[de]),_:1})])]),default:a(()=>[e(V,{class:"update-el-form",model:g.value,rules:x},{default:a(()=>[e(d,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:a(()=>[e(_,{modelValue:g.value.name,"onUpdate:modelValue":l[3]||(l[3]=t=>g.value.name=t)},null,8,["modelValue"])]),_:1}),e(d,{label:"\u5206\u7C7B\u522B\u540D",prop:"alias"},{default:a(()=>[e(_,{modelValue:g.value.alias,"onUpdate:modelValue":l[4]||(l[4]=t=>g.value.alias=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),e(U,{modelValue:v.value,"onUpdate:modelValue":l[10]||(l[10]=t=>v.value=t),title:"\u5206\u7C7B\u4FE1\u606F\u4FEE\u6539",width:"30%",center:""},{footer:a(()=>[h("span",re,[e(r,{onClick:l[9]||(l[9]=t=>v.value=!1)},{default:a(()=>[ie]),_:1}),e(r,{type:"primary",onClick:$},{default:a(()=>[me]),_:1})])]),default:a(()=>[e(V,{class:"update-el-form",model:c.value,rules:x},{default:a(()=>[e(d,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:a(()=>[e(_,{modelValue:c.value.name,"onUpdate:modelValue":l[7]||(l[7]=t=>c.value.name=t)},null,8,["modelValue"])]),_:1}),e(d,{label:"\u5206\u7C7B\u522B\u540D",prop:"alias"},{default:a(()=>[e(_,{modelValue:c.value.alias,"onUpdate:modelValue":l[8]||(l[8]=t=>c.value.alias=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}},fe=P(pe,[["__scopeId","data-v-f7d998ec"]]);export{fe as default};
